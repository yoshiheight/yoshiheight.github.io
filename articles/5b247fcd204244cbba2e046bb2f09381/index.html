<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    
            <meta name="robots" content="noindex" />
        
    
            <meta name="robots" content="nofollow" />
        
    <meta name="description" content="C#とTypeScriptに関することをメインに書いています。" />

    <title>
        
                    [TS] TypeScriptざっくりメモ | Programmer&#39;s Note
                
    </title>

    
            <link rel="stylesheet" href="/sitegen-2.1.0/css/sitegen.css" />
        
            <link rel="stylesheet" href="/sitegen-2.1.0/css/sitegen-article.css" />
        

    <script type="module" src="/sitegen-2.1.0/js/initialize.js"></script>

    
    <link rel="icon" type="image/png" href="/images/favicon-32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/images/favicon-48.png" sizes="48x48" />
    <link rel="icon" type="image/png" href="/images/favicon-64.png" sizes="64x64" />
    <link rel="icon" type="image/png" href="/images/favicon-128.png" sizes="128x128" />
    <link rel="icon" type="image/png" href="/images/favicon-256.png" sizes="256x256" />
    <link rel="apple-touch-icon" href="/images/favicon-256.png" sizes="256x256" />
    <link rel="stylesheet" href="/css/custom-1.0.css" />
</head>
<body>
    <!-- サイトヘッダー -->
    <header id="sdi-header">
        <div id="sdi-header-inner">
            <div id="sdi-site-name"><a href="/">Programmer&#39;s Note</a></div>
            <div id="sdi-menu">
                <div class="sdc-menu-section">
                    
                                            <div>
                                                <a href="/categories/demo/">Demo</a>
                                            </div>
                                        
                                            <div>
                                                <a href="/categories/tech/">Tech</a>
                                            </div>
                                        
                                            <div>
                                                <a href="/categories/scrap/">Scrap</a>
                                            </div>
                                        
                                            <div>
                                                <a href="/categories/tests/">Test&#39;s</a>
                                            </div>
                                        
                </div>
                <div class="sdc-menu-section">
                    <div>
                        <a href="/tags/">Tags</a>
                    </div>
                    <div>
                        <a href="/search/">Search</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <div id="sdi-container">
        <div id="sdi-container-inner">
            <main>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/styles/base16/nova.min.css" />
<script type="module">
    import hljs from "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/es/highlight.min.js";
    hljs.highlightAll();
</script>
<script type="module">
    import mermaid from "https://unpkg.com/mermaid@9.1.3/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true, theme: "base" });
</script>

<article id="sdi-entry-article">
    <!-- 記事ヘッダー -->
    <header>
        <!-- 記事タイトル -->
        <h1>[TS] TypeScriptざっくりメモ</h1>

        <div id="sdi-article-header-annotation">
            <!-- タグ -->
            <div class="sdc-tags">
                <div class="sdc-tag sdc-primary-tag sdc-primary-tag1">
                    <a href="/categories/tech/">Tech</a>
                </div>
                
                                    <div class="sdc-tag">
                                        <a href="/tags/typescript/">TypeScript</a>
                                    </div>
                                
            </div>

            <!-- 日付 -->
            <time datetime="2019-04-04">2019-04-04</time>
        </div>
    </header>

    <!-- 記事内容 -->
    <div id="sdi-article-body">
<h3>はじめに</h3>
<p>TypeScriptの言語仕様の自分用ざっくりメモです。</p>
<ul>
<li>TypeScriptを使う際、とりあえず知っておけばいいことを適当に記載
<ul>
<li>ECMAScript 2015（ES 6）の話も混ざってる</li>
</ul>
</li>
<li>現時点のTypeScriptのバージョンは3.4</li>
<li>言語仕様やコンパイラオプションの詳細は公式サイトで
<ul>
<li><a href="https://www.typescriptlang.org/">https://www.typescriptlang.org/</a></li>
</ul>
</li>
<li>型定義の検索は以下で
<ul>
<li><a href="https://microsoft.github.io/TypeSearch/">https://microsoft.github.io/TypeSearch/</a></li>
</ul>
</li>
</ul>
<h3>型</h3>
<ul>
<li>boolean</li>
<li>number</li>
<li>string</li>
<li>null, undefined</li>
<li>オブジェクト型</li>
<li>any型</li>
<li>他にもあるけど省略</li>
</ul>
<h3>変数</h3>
<ul>
<li>ブロックスコープ
<ul>
<li>let</li>
</ul>
</li>
<li>グローバルスコープ
<ul>
<li>var</li>
</ul>
</li>
</ul>
<pre><code class="language-ts">let hoge: string = &quot;abc&quot;;
let fuga = &quot;xyz&quot;; // 初期化する場合、型指定は省略可能
let piyo; // この場合、any型となる
</code></pre>
<h3>定数</h3>
<ul>
<li>ブロックスコープ
<ul>
<li>const</li>
</ul>
</li>
</ul>
<pre><code class="language-ts">const length = 100;
</code></pre>
<h3>数値リテラル</h3>
<pre><code class="language-ts">let decimal = 6;        // 10進数リテラル
let hex = 0xFF;         // 16進数リテラル
let octal = 0o66;       // 8進数
let binary = 0b1011;    // 2進数
let exp1 = 7.2E5        // 指数
let exp2 = 3.4E-3       // 指数
</code></pre>
<h3>テンプレート文字列</h3>
<pre><code class="language-ts">let hoge = `私の名前は ${name} です。`;
let fuga = `ここは
改行となる。`;
</code></pre>
<h3>演算子、条件分岐、ループ</h3>
<p>JavaScriptと同じ。</p>
<h3>分割代入</h3>
<pre><code class="language-ts">let hoge, fuga: number;
[hoge, fuga] = [100, 200];
console.log(hoge);
console.log(fuga);

const [foo, bar] = [&quot;FOO&quot;, &quot;BAR&quot;];
console.log(foo);
console.log(bar);
</code></pre>
<h3>any型</h3>
<p>なんでも代入できる型。用途としては、型定義が提供されていない場合に使用する等。</p>
<h3>declare</h3>
<p>外部のJavaScriptで定義されたグローバル変数を使用する。</p>
<pre><code class="language-ts">declare var hoge: any;
</code></pre>
<h3>配列</h3>
<pre><code class="language-ts">let array1: string[] = [&quot;abc&quot;, &quot;xyz&quot;];
let array2: string[] = []; // 空の配列で初期化
let array3 = [&quot;abc&quot;, &quot;xyz&quot;];
let array4 = [&quot;abc&quot;, 123]; // この場合は (string | number)[] 型になる

// 多次元配列
let data: number[][] = [[10, 20], [30, 40], [50, 60]];
</code></pre>
<h3>タプル</h3>
<pre><code class="language-ts">// 型指定は必須（省略すると配列になってしまう）
let tuple: [string, number, boolean] = [&quot;hoge&quot;, 123, true];
</code></pre>
<h3>列挙型</h3>
<pre><code class="language-ts">enum Color {
    Red, // 0
    Green, // 1
    Blue, // 2
}

enum Color {
    Red = 1, // 1
    Green, // 2
    Blue, // 3
}

let currentColor = Color.Red;
let name: string = Color[currentColor]; // 文字列として取得する場合
</code></pre>
<pre><code class="language-ts">// 文字列も可
enum Direction {
    Up = &quot;Up&quot;,
    Down = &quot;Down&quot;,
    Left = &quot;Left&quot;,
    Right = &quot;Right&quot;,
}
</code></pre>
<h3>共用体型</h3>
<pre><code class="language-ts">let userId: number | string = 007; // 数値と文字列の両方OKな型
userId = &quot;007&quot;;
</code></pre>
<h3>交差型</h3>
<p>省略。</p>
<h3>型エイリアス</h3>
<pre><code class="language-ts">type HogeType = number | string;
type FugaType = [string, number, boolean];
</code></pre>
<h3>型アサーション</h3>
<p>キャストのこと。記述方法が2種類ある。</p>
<pre><code class="language-ts">let anyText: any = &quot;hoge&quot;;
let text1 = &lt;string&gt;anyText; // 方法1
let text2 = anyText as string; // 方法2
</code></pre>
<h3>Set</h3>
<pre><code class="language-ts">let mySet = new Set&lt;string&gt;([&quot;hoge&quot;, &quot;fuga&quot;]);
mySet.add(&quot;piyo&quot;);
for (const item of mySet) {
    console.log(item);
}
</code></pre>
<h3>Map</h3>
<pre><code class="language-ts">let myMap = new Map&lt;string, number&gt;();
myMap.set(&quot;hoge&quot;, 100);
myMap.set(&quot;fuga&quot;, 200);
for (const [key, value] of myMap) {
    console.log(key);
    console.log(value);
}
</code></pre>
<h3>リテラル型</h3>
<pre><code class="language-ts">let direction: &quot;up&quot; | &quot;down&quot; | &quot;left&quot; | &quot;right&quot;;
direction = &quot;up&quot;; // OK
direction = &quot;abc&quot;; // Error
</code></pre>
<pre><code class="language-ts">type Direction = &quot;up&quot; | &quot;down&quot; | &quot;left&quot; | &quot;right&quot; | 0 | 1 | 2 | 3;
let direction: Direction = &quot;up&quot;;
direction = 3;
</code></pre>
<h3>null許容型</h3>
<p>デフォルトでは変数はnull許容だが、コンパイラオプションでnull非許容に変更可能。
その場合、以下のようにするとnull許容型となる。</p>
<pre><code class="language-ts">let hoge: string | null = null;
let fuga: string | undefined = undefined;
</code></pre>
<h3>オブジェクト型リテラル</h3>
<p>省略。</p>
<h3>例外処理</h3>
<p>JavaScriptと同じ。</p>
<h3>関数</h3>
<h4>外部関数</h4>
<p>JavaScriptと同じ。</p>
<h4>関数の引数</h4>
<ul>
<li>通常の引数</li>
<li>デフォルト引数
<ul>
<li><code>function hoge(num: number = 0)</code></li>
</ul>
</li>
<li>オプション引数
<ul>
<li>省略した場合、undefined になる</li>
<li><code>function hoge(num?: number)</code></li>
</ul>
</li>
<li>可変長引数
<ul>
<li><code>function hoge(...nums: number[])</code></li>
</ul>
</li>
</ul>
<h4>関数のオーバーロード</h4>
<p>やりかたが特殊で、まずオーバーロードする関数の宣言のみを書き、実際に実装する関数は1つのみとする。
その実装する関数の引数は、宣言した関数とつじつまが合うようにする。</p>
<h3>クラス</h3>
<pre><code class="language-ts">/**
 * ドキュメンテーションコメント。
 */
class Hoge {
    // フィールド
    /** 名前 */
    private readonly _name: string;
    /** 年齢 */
    private _age: number;

    // コンストラクタ
    public constructor(name: string, age: number) {
        this._name = name;
        this._age = age;
    }

    // アクセサ
    public get name(): string { return this._name; }
    public get age(): number { return this._age; }
    public set age(age: number) { this._age = age; }

    // メソッド
    public update(): void {
    }

    // 静的フィールド
    public static readonly __Foo = 999;
    private static __bar = 0;

    // 静的アクセサ
    public static get bar(): number { return Hoge.__bar; }
    public static set bar(bar: number) { Hoge.__bar = bar; }

    // 静的メソッド
    public static init(): void {
    }
}
</code></pre>
<pre><code class="language-ts">class Hoge {
    // コンストラクタでインスタンスフィールドを定義する場合
    public constructor(
        private readonly _name: string,
        private _age: number) {
    }
}
</code></pre>
<ul>
<li>自身のメソッドやフィールドにアクセスする際
<ul>
<li>インスタンスメソッド/インスタンスフィールドを使用する場合、<code>this.</code> は必須</li>
<li>staticメソッド/staticフィールドを使用する場合、<code>クラス名.</code> は必須</li>
</ul>
</li>
</ul>
<h4>クラスの継承</h4>
<pre><code class="language-ts">// 基底クラス
class Hoge {
    public constructor(name: string) {
    }

    protected update(): void {
    }
}

// 派生クラス
class Fuga extends Hoge {
    public constructor() {
        // 基底クラスのコンストラクタ呼び出し
        super(&quot;fuga&quot;);
    }

    // 同シグネチャにすることでオーバーライドとなる
    protected update(): void {
    }
}
</code></pre>
<pre><code class="language-ts">// 抽象基底クラス
abstract class Hoge {
    protected abstract update(): void;
}

// 派生クラス
class Fuga extends Hoge {
    protected update(): void {
    }
}
</code></pre>
<h4>戻り値の型としてのthis</h4>
<ul>
<li>インスタンスメソッドの戻り値の型に this を指定する事が可能（メソッドチェーンにする場合等）</li>
<li>クラス型を戻り値の型にしてもいいが、this だと派生クラスがある場合に戻り値の型が派生クラス型扱いになるので便利</li>
</ul>
<h4>ユーティリティークラス</h4>
<p>staticクラスはないので、コンストラクタをprivateにすること。</p>
<pre><code class="language-ts">class Hoge {
    private constructor() { }
}
</code></pre>
<h3>名前空間</h3>
<pre><code class="language-ts">namespace Foo {
    class Hoge {
    }
}

namespace Foo.Bar {
    class Fuga {
    }
}
</code></pre>
<pre><code class="language-ts">namespace Foo {
    // 別の名前空間からPiyoを参照できるようにする
    export class Piyo {
    }
}
</code></pre>
<h3>ジェネリック</h3>
<p>基本的な構文はC#と大体同じ。</p>
<h4>制約</h4>
<pre><code class="language-ts">// T は Hoge を満たしていることを制約として指定する
&lt;T extends Hoge&gt;
</code></pre>
<h3>アロー関数</h3>
<p>ラムダ式のこと。アロー関数を使用するでthis問題を回避できる。</p>
<h3>インターフェイス</h3>
<pre><code class="language-ts">interface Hoge {
    name: string;
    age?: number; // ?指定の場合、実装は任意

    init(): void;
    update?(): void; // ?指定の場合、実装は任意
}

class Fuga implements Hoge {
    public name = &quot;fuga&quot;;

    public init(): void { }
}
</code></pre>
<ul>
<li>TypeScriptのインターフェイスは、implementsしていなくても対象がそのインターフェイスのシグネチャを満たしていればいい
<ul>
<li>型が一致するかではなく、構造が一致するかどうかで互換性があるかを判断しているから（構造的部分型）</li>
</ul>
</li>
</ul>
<h3>型ガード</h3>
<p>if文で <code>instanceof 型名</code> や <code>typeof value === &quot;型名&quot;</code> で判定したあとは、その型として使える機能。</p>
<pre><code class="language-ts">let value: any = &quot;abc&quot;;
if (typeof value === &quot;string&quot;) {
    // string型のtoUpperCase()メソッドが使用可能
    let upperCase = value.toUpperCase();
}
</code></pre>
<pre><code class="language-ts">// 型ガードをメソッド化する場合
public static isString(value: any): value is string {
    return typeof value === &quot;string&quot;;
}
</code></pre>
<h3>その他、参考</h3>
<p>async/await、コルーチンは以下の記事で使用例あり。</p>
<p><a href="https://crash.jp/pages/938a2b72c7174014b7ce6005cd4bda9e/">https://crash.jp/pages/938a2b72c7174014b7ce6005cd4bda9e/</a></p>
<h3>おわりに</h3>
<p>JavaScriptよさらば！</p>

    </div>
</article>
            </main>
        </div>
    </div>

    <!-- サイトフッター -->
    <footer id="sdi-footer">
        <div id="sdi-footer-inner">
            
            <!-- プロフィール -->
            <div style="font-size: 115%; line-height: 1.1;">
                <div style="display: flex;">
                    <div style="flex-shrink: 0;">
                        <img src="/images/favicon-128.png" style="margin-right: 20px; border: 2px solid #e4e4e4; border-radius: 50%;" />
                    </div>
                    <div style="padding-top: 5px;">
                        <div style="display: flex; align-items: flex-end; flex-wrap: wrap; column-gap: 8px;">
                            <div style="font-size: 110%;">Yoshiheight</div>
                            <div>/</div>
                            <div style="font-size: 90%;">Programmer</div>
                        </div>
                        <div style="margin: 0.5em 0;">C#とTypeScriptに関することをメインに書いています。</div>
                        <div style="margin-top: 25px; text-decoration: underline;">
                            <a href="https://github.com/yoshiheight">GitHub</a>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; font-size: 98%;">
                Generated by <a style="text-decoration: underline;" href="https://github.com/yoshiheight/Sitegen">Sitegen</a>
            </div>
        </div>
    </footer>
</body>
</html>
