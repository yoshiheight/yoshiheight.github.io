<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    
            <meta name="robots" content="noindex" />
        
    
            <meta name="robots" content="nofollow" />
        
    <meta name="description" content="C#とTypeScriptに関することをメインに書いています。" />

    <title>
        
                    [C#] FizzBuzz | Programmer&#39;s Note
                
    </title>

    
            <link rel="stylesheet" href="/sitegen-2.1.0/css/sitegen.css" />
        
            <link rel="stylesheet" href="/sitegen-2.1.0/css/sitegen-article.css" />
        

    <script type="module" src="/sitegen-2.1.0/js/initialize.js"></script>

    
    <link rel="icon" type="image/png" href="/images/favicon-32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/images/favicon-48.png" sizes="48x48" />
    <link rel="icon" type="image/png" href="/images/favicon-64.png" sizes="64x64" />
    <link rel="icon" type="image/png" href="/images/favicon-128.png" sizes="128x128" />
    <link rel="icon" type="image/png" href="/images/favicon-256.png" sizes="256x256" />
    <link rel="apple-touch-icon" href="/images/favicon-256.png" sizes="256x256" />
    <link rel="stylesheet" href="/css/custom-1.0.css" />
</head>
<body>
    <!-- サイトヘッダー -->
    <header id="sdi-header">
        <div id="sdi-header-inner">
            <div id="sdi-site-name"><a href="/">Programmer&#39;s Note</a></div>
            <div id="sdi-menu">
                <div class="sdc-menu-section">
                    
                                            <div>
                                                <a href="/categories/demo/">Demo</a>
                                            </div>
                                        
                                            <div>
                                                <a href="/categories/tech/">Tech</a>
                                            </div>
                                        
                                            <div>
                                                <a href="/categories/scrap/">Scrap</a>
                                            </div>
                                        
                                            <div>
                                                <a href="/categories/tests/">Test&#39;s</a>
                                            </div>
                                        
                </div>
                <div class="sdc-menu-section">
                    <div>
                        <a href="/tags/">Tags</a>
                    </div>
                    <div>
                        <a href="/search/">Search</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <div id="sdi-container">
        <div id="sdi-container-inner">
            <main>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/styles/base16/nova.min.css" />
<script type="module">
    import hljs from "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/es/highlight.min.js";
    hljs.highlightAll();
</script>
<script type="module">
    import mermaid from "https://unpkg.com/mermaid@9.1.3/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true, theme: "base" });
</script>

<article id="sdi-entry-article">
    <!-- 記事ヘッダー -->
    <header>
        <!-- 記事タイトル -->
        <h1>[C#] FizzBuzz</h1>

        <div id="sdi-article-header-annotation">
            <!-- タグ -->
            <div class="sdc-tags">
                <div class="sdc-tag sdc-primary-tag sdc-primary-tag2">
                    <a href="/categories/scrap/">Scrap</a>
                </div>
                
                                    <div class="sdc-tag">
                                        <a href="/tags/cs/">C#</a>
                                    </div>
                                
            </div>

            <!-- 日付 -->
            <time datetime="2020-06-02">2020-06-02</time>
        </div>
    </header>

    <!-- 記事内容 -->
    <div id="sdi-article-body">
<p>今更ですが、C# で FizzBuzz です。</p>
<h3>案）まず最初は</h3>
<pre><code class="language-cs">using System;

class Program
{
    static void Main()
    {
        // とりあえずこう書くか
        for (var i = 1; i &lt;= 100; i++)
        {
            var isFizz = (i % 3) == 0;
            var isBuzz = (i % 5) == 0;
            if (isFizz &amp;&amp; isBuzz)
            {
                Console.WriteLine(&quot;FizzBuzz&quot;);
            }
            else if (isFizz)
            {
                Console.WriteLine(&quot;Fizz&quot;);
            }
            else if (isBuzz)
            {
                Console.WriteLine(&quot;Buzz&quot;);
            }
            else
            {
                Console.WriteLine(i);
            }
        }

        // もしくはこう書くか
        for (var i = 1; i &lt;= 100; i++)
        {
            var isFizz = (i % 3) == 0;
            var isBuzz = (i % 5) == 0;
            if (isFizz || isBuzz)
            {
                if (isFizz)
                {
                    Console.Write(&quot;Fizz&quot;);
                }
                if (isBuzz)
                {
                    Console.Write(&quot;Buzz&quot;);
                }
            }
            else
            {
                Console.Write(i);
            }
            Console.WriteLine();
        }
    }
}
</code></pre>
<h3>案）StringBuilderを使用</h3>
<pre><code class="language-cs">using System;
using System.Text;

class Program
{
    static void Main()
    {
        var sb = new StringBuilder();
        for (var i = 1; i &lt;= 100; i++)
        {
            if (i % 3 == 0)
            {
                sb.Append(&quot;Fizz&quot;);
            }
            if (i % 5 == 0)
            {
                sb.Append(&quot;Buzz&quot;);
            }
            if (sb.Length == 0)
            {
                sb.Append(i);
            }

            Console.WriteLine(sb);
            sb.Clear();
        }
    }
}
</code></pre>
<h3>案）パターンマッチング</h3>
<pre><code class="language-cs">using System;

class Program
{
    static void Main()
    {
        // プロパティパターンマッチング
        for (var i = 1; i &lt;= 100; i++)
        {
            Console.WriteLine((modFizz: i % 3, modBuzz: i % 5) switch
            {
                { modFizz: 0, modBuzz: 0 } =&gt; &quot;FizzBuzz&quot;,
                { modFizz: 0 } =&gt; &quot;Fizz&quot;,
                { modBuzz: 0 } =&gt; &quot;Buzz&quot;,
                _ =&gt; Convert.ToString(i),
            });
        }

        // 位置パターンマッチング
        for (var i = 1; i &lt;= 100; i++)
        {
            Console.WriteLine((i % 3, i % 5) switch
            {
                (0, 0) =&gt; &quot;FizzBuzz&quot;,
                (0, _) =&gt; &quot;Fizz&quot;,
                (_, 0) =&gt; &quot;Buzz&quot;,
                _ =&gt; Convert.ToString(i),
            });
        }

        // varパターンマッチング
        for (var i = 1; i &lt;= 100; i++)
        {
            Console.WriteLine(i switch
            {
                var _ when i % 15 == 0 =&gt; &quot;FizzBuzz&quot;,
                var _ when i % 3 == 0 =&gt; &quot;Fizz&quot;,
                var _ when i % 5 == 0 =&gt; &quot;Buzz&quot;,
                _ =&gt; Convert.ToString(i),
            });
        }
    }
}
</code></pre>
<h3>案）FizzBuzz値を表す構造体</h3>
<pre><code class="language-cs">using System;

class Program
{
    static void Main()
    {
        for (var v = new FizzBuzzValue(1); v &lt;= 100; v++)
        {
            Console.WriteLine(v);
        }
    }
}

readonly struct FizzBuzzValue
{
    private readonly int _num;

    public FizzBuzzValue(int num)
    {
        _num = num;
    }

    public static bool operator &lt;=(FizzBuzzValue fizzBuzzValue, int num)
    {
        return fizzBuzzValue._num &lt;= num;
    }

    public static bool operator &gt;=(FizzBuzzValue fizzBuzzValue, int num)
    {
        return fizzBuzzValue._num &gt;= num;
    }

    public static FizzBuzzValue operator ++(FizzBuzzValue fizzBuzzValue)
    {
        return new FizzBuzzValue(fizzBuzzValue._num + 1);
    }

    public override string ToString()
    {
        return (_num % 3, _num % 5) switch
        {
            (0, 0) =&gt; &quot;FizzBuzz&quot;,
            (0, _) =&gt; &quot;Fizz&quot;,
            (_, 0) =&gt; &quot;Buzz&quot;,
            _ =&gt; Convert.ToString(_num),
        };
    }
}
</code></pre>
<h3>案）コルーチンを使用</h3>
<pre><code class="language-cs">using System;
using System.Collections.Generic;

class Program
{
    static void Main()
    {
        foreach (var s in FizzBuzzGenerator.Generate(1, 100))
        {
            Console.WriteLine(s);
        }
    }
}

static class FizzBuzzGenerator
{
    public static IEnumerable&lt;string&gt; Generate(int start, int count)
    {
        for (var i = start; i &lt;= count; i++)
        {
            yield return (i % 3, i % 5) switch
            {
                (0, 0) =&gt; &quot;FizzBuzz&quot;,
                (0, _) =&gt; &quot;Fizz&quot;,
                (_, 0) =&gt; &quot;Buzz&quot;,
                _ =&gt; Convert.ToString(i),
            };
        }
    }
}
</code></pre>
<h3>案）外部から条件を指定</h3>
<pre><code class="language-cs">using System;
using System.Collections.Generic;
using System.Linq;

class Program
{
    static void Main()
    {
        var fb = new FizzBuzzGenerator(new (Func&lt;int, bool&gt; condition, string value)[]
        {
            (n =&gt; n % 3 == 0, &quot;Fizz&quot;),
            (n =&gt; n % 5 == 0, &quot;Buzz&quot;),
        });

        foreach (var s in fb.Generate(1, 100))
        {
            Console.WriteLine(s);
        }
    }
}

class FizzBuzzGenerator
{
    private readonly IReadOnlyList&lt;(Func&lt;int, bool&gt; condition, string value)&gt; _rules;

    public FizzBuzzGenerator(IReadOnlyList&lt;(Func&lt;int, bool&gt;, string)&gt; rules)
    {
        _rules = rules;
    }

    public IEnumerable&lt;string&gt; Generate(int start, int count)
    {
        return Enumerable.Range(start, count).Select(n =&gt;
            _rules.Aggregate(
                (string?)null,
                (s, rule) =&gt; rule.condition(n) ? s + rule.value : s,
                s =&gt; s ?? n.ToString()));
    }
}
</code></pre>
<h3>案）三項演算子でワンライナー</h3>
<pre><code class="language-cs">using System;
using System.Linq;

class Program
{
    static void Main() =&gt;
        Enumerable.Range(1, 100).Select(n =&gt;
            n % 15 == 0 ? &quot;FizzBuzz&quot; :
            n % 3 == 0 ? &quot;Fizz&quot; :
            n % 5 == 0 ? &quot;Buzz&quot; :
            n.ToString()).ToList().ForEach(Console.WriteLine);
}
</code></pre>

    </div>
</article>
            </main>
        </div>
    </div>

    <!-- サイトフッター -->
    <footer id="sdi-footer">
        <div id="sdi-footer-inner">
            
            <!-- プロフィール -->
            <div style="font-size: 115%; line-height: 1.1;">
                <div style="display: flex;">
                    <div style="flex-shrink: 0;">
                        <img src="/images/favicon-128.png" style="margin-right: 20px; border: 2px solid #e4e4e4; border-radius: 50%;" />
                    </div>
                    <div style="padding-top: 5px;">
                        <div style="display: flex; align-items: flex-end; flex-wrap: wrap; column-gap: 8px;">
                            <div style="font-size: 110%;">Yoshiheight</div>
                            <div>/</div>
                            <div style="font-size: 90%;">Programmer</div>
                        </div>
                        <div style="margin: 0.5em 0;">C#とTypeScriptに関することをメインに書いています。</div>
                        <div style="margin-top: 25px; text-decoration: underline;">
                            <a href="https://github.com/yoshiheight">GitHub</a>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; font-size: 98%;">
                Generated by <a style="text-decoration: underline;" href="https://github.com/yoshiheight/Sitegen">Sitegen</a>
            </div>
        </div>
    </footer>
</body>
</html>
